'use strict';

const HomeyApp = require('./appWrapper');

const HOMEY_APP_ID = 'nl.scanno.mqtt';
const HOMEY_APP_DELEY = 10;

module.exports = class MqttClientApp extends HomeyApp {

  constructor(owner, mandatory) {
    super(owner, mandatory, HOMEY_APP_ID, HOMEY_APP_DELEY);

    this.logDebug('initialized');
  }

  // MqttClientApp API

  publish(mqttMsg) {
    this.logDebug(`publish() > ${JSON.stringify(mqttMsg)}`);
    return this.post('send', mqttMsg);
  }

  subscribe(topic, options = {}) {
    this.logDebug(`subscribe() > ${topic}`);
    return this.post('subscribe', { topic });
  }

  unsubscribe(topic, options = {}) {
    this.logDebug(`unsubscribe() > ${topic}`);
    return this.post('unsubscribe', { topic });
  }

};
